<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgriSense Technologies - Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2e7d32;
            --primary-light: #4caf50;
            --primary-dark: #1b5e20;
            --secondary: #ff9800;
            --light: #f5f5f5;
            --dark: #333;
            --gray: #757575;
            --white: #ffffff;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f9f9f9;
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background-color: var(--white);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-img {
            height: 50px;
            width: auto;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-img img {
            height: 100%;
            width: auto;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-dark);
        }

        .logo-text span {
            color: var(--secondary);
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 25px;
        }

        nav a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: color 0.3s;
        }

        nav a:hover {
            color: var(--primary);
        }

        .auth-buttons {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 8px 20px;
            border-radius: 5px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        /* Mobile Navigation */
        .mobile-nav-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--primary-dark);
        }

        .mobile-nav {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background: var(--white);
            box-shadow: var(--shadow);
            z-index: 99;
        }

        .mobile-nav.active {
            display: block;
        }

        .mobile-nav ul {
            flex-direction: column;
            padding: 20px;
        }

        .mobile-nav li {
            margin-bottom: 15px;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(46, 125, 50, 0.9), rgba(46, 125, 50, 0.8)), url('https://images.unsplash.com/photo-1500382017468-9049fed747ef?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1632&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 80px 0;
            text-align: center;
        }

        .hero h1 {
            font-size: 2.8rem;
            margin-bottom: 20px;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 30px;
        }

        .hero-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .btn-hero {
            padding: 12px 30px;
            font-size: 1.1rem;
        }

        .btn-secondary {
            background: var(--secondary);
            color: white;
        }

        /* Services Section */
        .services {
            padding: 70px 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 50px;
        }

        .section-title h2 {
            font-size: 2.2rem;
            color: var(--primary-dark);
            margin-bottom: 15px;
        }

        .section-title p {
            color: var(--gray);
            max-width: 600px;
            margin: 0 auto;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .service-card {
            background: var(--white);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
        }

        .service-card:hover {
            transform: translateY(-10px);
        }

        .service-icon {
            height: 80px;
            background: var(--primary-light);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
        }

        .service-content {
            padding: 25px;
        }

        .service-content h3 {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: var(--primary-dark);
        }

        .service-content p {
            color: var(--gray);
            margin-bottom: 20px;
        }

        .service-link {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Stats Section */
        .stats {
            background: var(--primary);
            color: white;
            padding: 60px 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            text-align: center;
        }

        .stat-item h3 {
            font-size: 2.0rem;
            margin-bottom: 10px;
        }

        .stat-item p {
            font-size: 1.1rem;
        }

        /* Contact Section */
        .contact {
            padding: 80px 0;
            background-color: var(--light);
        }

        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
        }

        .contact-info h3 {
            font-size: 1.0rem;
            margin-bottom: 20px;
            color: var(--primary-dark);
        }

        .contact-info p {
            margin-bottom: 30px;
            color: var(--gray);
        }

        .contact-details {
            margin-bottom: 30px;

        }

        .contact-detail {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .contact-detail i {
            width: 40px;
            height: 40px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            word-wrap: break-word;
        }

        .contact-form {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }

        .contact-form h3 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--primary-dark);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            border-color: var(--primary);
            outline: none;
        }

        .form-group textarea {
            height: 120px;
            resize: vertical;
        }

        /* Contact Section - Fix Phone Visibility */
        .contact-details {
            margin-bottom: 30px;
        }

        .contact-detail {
            display: flex;
            align-items: flex-start;
            /* Changed from center to flex-start */
            gap: 12px;
            margin-bottom: 15px;
        }

        .contact-detail i {
            width: 40px;
            height: 40px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            /* Prevent icon from shrinking */
            margin-top: 4px;
            /* Align better with text */
        }

        .contact-detail div {
            flex: 1;
            /* Take remaining space */
            min-width: 0;
            /* Allow text wrapping */
            min-width: 0;
            /* Add this line */
            word-wrap: break-word;
            /* Add this line */
        }

        .contact-detail div h4 {
            margin-bottom: 5px;
            color: var(--primary-dark);
            font-size: 1.0rem;
        }

        .contact-detail div p {
            color: var(--gray);
            line-height: 1.5;
            word-wrap: break-word;
            /* Ensure long text wraps */
            word-break: break-word;
            /* Add this line */
            hyphens: auto;
            /* Add this line */
        }

        /* Footer Contact Fix */
        .footer-col ul li {
            margin-bottom: 10px;
            display: flex;
            align-items: flex-start;
            gap: 8px;
        }

        .footer-col ul li i {
            margin-top: 3px;
            flex-shrink: 0;
            width: 16px;
            text-align: center;
        }

        /* Responsive Design Improvements */
        @media (max-width: 768px) {
            .contact-detail {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .contact-detail i {
                align-self: flex-start;
            }

            .contact-detail div {
                width: 100%;
            }

            .contact-detail div p {
                font-size: 0.90rem;
                /* Slightly smaller text on mobile */
            }

            /* Footer mobile fixes */
            .footer-col ul li {
                flex-direction: column;
                gap: 5px;
            }

            .footer-col ul li i {
                align-self: flex-start;
            }
        }

        @media (max-width: 480px) {
            .contact-details {
                margin-bottom: 20px;
            }

            .contact-detail {
                margin-bottom: 20px;
            }

            .contact-detail div p {
                font-size: 0.9rem;
                line-height: 1.4;
            }

            /* Ensure phone numbers don't break awkwardly */
            .contact-detail div p br {
                display: none;
                /* Remove line breaks on mobile */
            }

            .contact-detail div p {
                display: block;
                /* Stack phone numbers vertically */
            }
        }

        /* CTA Section */
        .cta {
            background: var(--secondary);
            color: white;
            padding: 80px 0;
            text-align: center;
        }

        .cta h2 {
            font-size: 2.2rem;
            margin-bottom: 20px;
        }

        .cta p {
            max-width: 600px;
            margin: 0 auto 30px;
            font-size: 1.1rem;
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            padding: 60px 0 15px;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-col h3 {
            font-size: 1.0rem;
            margin-bottom: 20px;
            color: var(--secondary);
        }

        .footer-col ul {
            list-style: none;
        }

        .footer-col ul li {
            margin-bottom: 10px;
        }

        .footer-col a {
            color: #ddd;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-col a:hover {
            color: var(--secondary);
        }

        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-icons a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transition: all 0.3s;
        }

        .social-icons a:hover {
            background: var(--secondary);
            transform: translateY(-3px);
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #aaa;
            font-size: 0.9rem;
        }

        /* Auth Modal */
        .modal {
            display: none;
            position: fixed;
            margin-top: 30px;
            top: 0;
            left: 0;
            width: 100%;
            height: 80%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            overflow: scroll;
            padding: 20px;
        }

        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            margin-top: 40px;
        }

        .modal-header h2 {
            color: var(--primary-dark);
            margin-top: 40px;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
        }

        .form-footer {
            text-align: center;
            margin-top: 20px;
        }

        .form-footer a {
            color: var(--primary);
            text-decoration: none;
            cursor: pointer;
        }

        .user-welcome {
            display: none;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* Dashboard Section */
        .dashboard {
            padding: 40px 0;
            display: none;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .dashboard-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
        }

        .dashboard-card i {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .dashboard-card h3 {
            margin-bottom: 10px;
            color: var(--primary-dark);
        }

        .recent-activities {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }

        .recent-activities h3 {
            margin-bottom: 15px;
            color: var(--primary-dark);
        }

        .activity-item {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--primary-light);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Success Message */
        .success-message {
            display: none;
            background: var(--primary-light);
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            text-align: center;
        }

        /* Service Booking Modal */
        .booking-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .booking-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .booking-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .booking-header h2 {
            color: var(--primary-dark);
        }

        /* AgriBot Chat Styles */
        .chatbot-btn {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            z-index: 1000;
            cursor: pointer;
            padding: 1rem 1.5rem;
            border-radius: 9999px;
            background-color: var(--primary);
            color: white;
            font-size: 1.125rem;
            font-weight: 600;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            outline: none;
            border: none;
        }

        .chatbot-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 20px rgba(0, 0, 0, 0.2);
        }

        .chatbot-box {
            position: fixed;
            bottom: 6rem;
            right: 1.5rem;
            width: 90vw;
            max-width: 400px;
            height: 70vh;
            max-height: 600px;
            z-index: 999;
            flex-direction: column;
            border-radius: 1.5rem;
            overflow: hidden;
            display: none;
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 0.3s ease, transform 0.3s ease;
            background-color: white;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .chatbot-header {
            background-color: var(--primary);
            color: white;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top-left-radius: 1.5rem;
            border-top-right-radius: 1.5rem;
        }

        .chatbot-header select {
            padding: 0.5rem;
            border-radius: 0.5rem;
            background-color: white;
            color: #1f2937;
            border: none;
            font-weight: 500;
        }

        .chatbot-header h3 {
            font-size: 1.25rem;
            font-weight: 700;
        }

        .chatbox-content {
            flex-grow: 1;
            padding: 1rem;
            overflow-y: auto;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .user-msg,
        .bot-msg {
            max-width: 80%;
            padding: 0.75rem;
            border-radius: 1rem;
            word-wrap: break-word;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .user-msg {
            align-self: flex-end;
            background-color: var(--primary);
            color: white;
            border-bottom-right-radius: 0.25rem;
        }

        .bot-msg {
            align-self: flex-start;
            background-color: #f3f4f6;
            color: #1f2937;
            border-bottom-left-radius: 0.25rem;
        }

        .source-link {
            display: block;
            margin-top: 0.5rem;
            font-size: 0.75rem;
            color: #10b981;
            text-decoration: none;
            word-break: break-all;
        }

        .source-link:hover {
            text-decoration: underline;
        }

        .loading-dots:after {
            content: ' .';
            animation: dots 1s steps(5, end) infinite;
        }

        @keyframes dots {

            0%,
            20% {
                content: '.';
            }

            40% {
                content: '..';
            }

            60%,
            100% {
                content: '...';
            }
        }

        .chat-controls {
            display: flex;
            padding: 1rem;
            gap: 0.5rem;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            background-color: white;
            border-bottom-left-radius: 1.5rem;
            border-bottom-right-radius: 1.5rem;
        }

        .chat-controls input {
            flex-grow: 1;
            padding: 0.75rem;
            border-radius: 0.75rem;
            border: 1px solid #d1d5db;
            outline: none;
        }

        .chat-controls button {
            background-color: var(--primary);
            color: white;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.2s;
        }

        .chat-controls button:hover:not(:disabled) {
            background-color: var(--primary-dark);
        }

        .chat-controls button:disabled {
            background-color: #9ca3af;
            cursor: not-allowed;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: row;
                gap: 15px;
            }

            .desktop-nav {
                display: none;
            }

            .mobile-nav-toggle {
                display: block;
            }

            .hero h1 {
                font-size: 2.2rem;
            }

            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }

            .dashboard-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .chatbot-box {
                width: 95vw;
                right: 2.5vw;
                bottom: 5rem;
            }

            .auth-buttons {
                gap: 10px;
            }

            .btn {
                padding: 6px 12px;
                font-size: 0.9rem;
            }

            .logo-text {
                font-size: 1.2rem;
            }

            .logo-img {
                height: 40px;
            }
        }

        @media (max-width: 480px) {
            .hero {
                padding: 60px 0;
            }

            .hero h1 {
                font-size: 1.8rem;
            }

            .hero p {
                font-size: 1rem;
            }

            .services-grid {
                grid-template-columns: 1fr;
            }

            .dashboard-cards {
                grid-template-columns: 1fr;
            }

            .footer-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .contact-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-img">
                        <img src="https://res.cloudinary.com/dkqegb7pm/image/upload/v1763285566/agri_logo_i2g7rg.jpg"
                            alt="AgriSense Logo">
                    </div>

                </div>

                <!-- Desktop Navigation -->
                <nav class="desktop-nav">
                    <ul>
                        <li><a href="#home" class="nav-link" data-page="home">Home</a></li>
                        <li><a href="#services" class="nav-link" data-page="services">Services</a></li>
                        <li><a href="#dashboard" class="nav-link" data-page="dashboard">Dashboard</a></li>
                        <li><a href="#contact" class="nav-link" data-page="contact">Contact</a></li>
                    </ul>
                </nav>

                <!-- Mobile Navigation Toggle -->
                <button class="mobile-nav-toggle" id="mobileNavToggle">
                    <i class="fas fa-bars"></i>
                </button>

                <!-- Mobile Navigation -->
                <nav class="mobile-nav" id="mobileNav">
                    <ul>
                        <li><a href="#home" class="nav-link" data-page="home">Home</a></li>
                        <li><a href="#services" class="nav-link" data-page="services">Services</a></li>
                        <li><a href="#dashboard" class="nav-link" data-page="dashboard">Dashboard</a></li>
                        <li><a href="#contact" class="nav-link" data-page="contact">Contact</a></li>
                    </ul>
                </nav>

                <div class="auth-buttons" id="authButtons">
                    <button class="btn btn-outline" id="loginBtn">Login</button>
                    <button class="btn btn-primary" id="signupBtn">Sign Up</button>
                </div>
                <div class="user-welcome" id="userWelcome">
                    <div class="user-avatar" id="userAvatar">U</div>
                    <span id="welcomeText">Hi, User!</span>
                    <button class="btn btn-outline" id="logoutBtn">Logout</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Home Section -->
    <section id="home" class="page-section">
        <!-- Hero Section -->
        <section class="hero">
            <div class="container">
                <h1>Empowering Farmers with Smart Agricultural Solutions</h1>
                <p>AgriSense Technologies provides comprehensive digital services to modernize and streamline
                    agricultural operations for better productivity and profitability.</p>
                <div class="hero-buttons">
                    <button class="btn btn-hero btn-secondary" id="exploreServicesBtn">Explore Services</button>
                    <button class="btn btn-hero btn-primary" id="getStartedBtn">Get Started</button>
                </div>
            </div>
        </section>
    </section>

    <!-- Services Section -->
    <section id="services" class="page-section services">
        <div class="container">
            <div class="section-title">
                <h2>Our Services</h2>
                <p>Comprehensive agricultural solutions designed to address the key challenges faced by modern
                    farmers</p>
            </div>
            <div class="services-grid">
                <!-- Service 1 -->
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-file-contract"></i>
                    </div>
                    <div class="service-content">
                        <h3>Government Scheme Access</h3>
                        <p>Help farmers easily discover, understand, and apply for various government schemes,
                            subsidies, and benefits relevant to agriculture.</p>
                        <a href="#" class="service-link">Learn More <i class="fas fa-arrow-right"></i></a>
                    </div>
                </div>

                <!-- Service 2 -->
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-hand-holding-usd"></i>
                    </div>
                    <div class="service-content">
                        <h3>Financial Documentation Assistance</h3>
                        <p>Guide farmers step-by-step through bank schemes, loan applications, and required
                            paperwork, ensuring smooth approval without confusion.</p>
                        <a href="#" class="service-link">Learn More <i class="fas fa-arrow-right"></i></a>
                    </div>
                </div>

                <!-- Service 3 -->
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-tractor"></i>
                    </div>
                    <div class="service-content">
                        <h3>Machinery & Tractor Rentals</h3>
                        <p>Provide affordable rental services for essential farm machinery, including tractors,
                            tillers, and harvesters‚Äîavailable on demand.</p>
                        <a href="#" class="service-link">Learn More <i class="fas fa-arrow-right"></i></a>
                    </div>
                </div>

                <!-- Service 4 -->
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-truck-loading"></i>
                    </div>
                    <div class="service-content">
                        <h3>Delivery of Farm Supplies</h3>
                        <p>Deliver important agricultural inputs such as fertilizers, seeds, pesticides, irrigation
                            pipes, and tools directly to farmers' homes.</p>
                        <a href="#" class="service-link">Learn More <i class="fas fa-arrow-right"></i></a>
                    </div>
                </div>

                <!-- Service 5 -->
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-seedling"></i>
                    </div>
                    <div class="service-content">
                        <h3>Agriculture Consultancy</h3>
                        <p>Offer expert advisory services backed by AI and domain knowledge, including crop
                            selection, disease management, soil analysis, and yield optimization.</p>
                        <a href="#" class="service-link">Learn More <i class="fas fa-arrow-right"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-item">
                    <h3>10,000+</h3>
                    <p>Farmers Served</p>
                </div>
                <div class="stat-item">
                    <h3>500+</h3>
                    <p>Villages Covered</p>
                </div>
                <div class="stat-item">
                    <h3>25+</h3>
                    <p>Government Schemes</p>
                </div>
                <div class="stat-item">
                    <h3>99.09%</h3>
                    <p>Customer Satisfaction</p>
                </div>
            </div>
        </div>
    </section>


    <!-- Contact Section -->
    <section id="contact" class="page-section contact">
        <div class="container">
            <div class="section-title">
                <h2>Get In Touch</h2>
                <p>Have questions or need assistance? Reach out to our team and we'll get back to you soon.</p>
            </div>
            <div class="contact-grid">
                <div class="contact-info">
                    <h3>Contact Information</h3>
                    <p>We're here to help farmers with all their agricultural needs. Feel free to reach out to us
                        through any of the following channels.</p>

                    <div class="contact-details">
                        <div class="contact-detail">
                            <i class="fas fa-map-marker-alt"></i>
                            <div>
                                <h4>Our Location</h4>
                                <p>manjunath building,3rd floor,near primary
                                    school,hirandahalli,avalahalli,hoskote,bengaluru</p>
                            </div>
                        </div>
                        <div class="contact-detail">
                            <i class="fas fa-phone"></i>
                            <div>
                                <h4>Phone Number</h4>
                                <p>7975256005</p>
                                <p>9886888129</p>
                            </div>
                        </div>
                        <div class="contact-detail">
                            <i class="fas fa-envelope"></i>
                            <div>
                                <h4>Email Address</h4>
                                <p>agrisense.technologies2025@gmail.com</p>
                            </div>
                        </div>
                    </div>

                    <div class="social-icons">
                        <a href="https://www.facebook.com/share/1ZZK9Nthph/"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://www.instagram.com/agri.sense2025?igsh=MWZ5eGJmZnF5dmNrcA=="><i
                                class="fab fa-instagram"></i></a>
                        <a href="https://www.linkedin.com/company/agrisense-technologies/about/?viewAsMember=true"><i
                                class="fab fa-linkedin-in"></i></a>

                    </div>
                </div>

                <div class="contact-form">
                    <h3>Send Us a Message</h3>
                    <form action="https://formspree.io/f/xkgkknbr" method="POST" id="contactForm">
                        <div class="form-group">
                            <label for="contactName">Full Name *</label>
                            <input type="text" id="contactName" name="name" required>
                        </div>
                        <div class="form-group">
                            <label for="contactLocation">Location *</label>
                            <input type="text" id="contactLocation" name="location" required>
                        </div>
                        <div class="form-group">
                            <label for="contactPhone">Phone Number *</label>
                            <input type="tel" id="contactPhone" name="phone" required>
                        </div>
                        <div class="form-group">
                            <label for="contactWhatsApp">WhatsApp Number</label>
                            <input type="tel" id="contactWhatsApp" name="whatsapp">
                        </div>
                        <div class="form-group">
                            <label for="contactEmail">Email Address *</label>
                            <input type="email" id="contactEmail" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="contactHelp">What Kind of Help Do You Need? *</label>
                            <select id="contactHelp" name="help_type" required>
                                <option value="">Select an option</option>
                                <option value="government-schemes">Government Scheme Access</option>
                                <option value="financial-documentation">Financial Documentation Assistance</option>
                                <option value="machinery-rental">Machinery & Tractor Rentals</option>
                                <option value="farm-supplies">Delivery of Farm Supplies</option>
                                <option value="agriculture-consultancy">Agriculture Consultancy</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="contactMessage">Additional Details</label>
                            <textarea id="contactMessage" name="message"
                                placeholder="Please provide any additional information about your requirements..."></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width: 100%;">Send Message</button>
                    </form>
                    <div class="success-message" id="contactSuccess">
                        <i class="fas fa-check-circle"></i> Thank you for your message! We'll get back to you soon.
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Dashboard Section -->
    <section id="dashboard" class="page-section dashboard">
        <div class="container">
            <div class="dashboard-header">
                <div>
                    <h2 id="dashboardTitle">Dashboard</h2>
                    <p id="dashboardSubtitle">Welcome to your AgriSense dashboard</p>
                </div>
                <div class="user-welcome">
                    <div class="user-avatar" id="dashboardUserAvatar">U</div>
                    <span id="dashboardWelcomeText">Hi, User!</span>
                </div>
            </div>

            <div class="dashboard-cards">
                <div class="dashboard-card" data-service="government-schemes">
                    <i class="fas fa-file-contract"></i>
                    <h3>Government Schemes</h3>
                    <p>Access and apply for agricultural schemes</p>
                </div>
                <div class="dashboard-card" data-service="financial-services">
                    <i class="fas fa-hand-holding-usd"></i>
                    <h3>Financial Services</h3>
                    <p>Loan applications and documentation</p>
                </div>
                <div class="dashboard-card" data-service="machinery-rental">
                    <i class="fas fa-tractor"></i>
                    <h3>Machinery Rental</h3>
                    <p>Book farm equipment online</p>
                </div>
                <div class="dashboard-card" data-service="farm-supplies">
                    <i class="fas fa-truck"></i>
                    <h3>Farm Supplies</h3>
                    <p>Order seeds, fertilizers & more</p>
                </div>
            </div>

            <div class="recent-activities">
                <h3>Recent Activities</h3>
                <div id="activitiesList">
                    <!-- Activities will be dynamically added here -->
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h3>AgriSense Technologies</h3>
                    <p>Empowering farmers with innovative digital solutions for modern agriculture.</p>
                    <div class="social-icons">
                        <a href="https://www.facebook.com/share/1ZZK9Nthph/"><i class="fab fa-facebook-f"></i></a>

                        <a href="https://www.instagram.com/agri.sense2025?igsh=MWZ5eGJmZnF5dmNrcA=="><i
                                class="fab fa-instagram"></i></a>
                        <a href="https://www.linkedin.com/company/agrisense-technologies/about/?viewAsMember=true"><i
                                class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="footer-col">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#home" class="nav-link" data-page="home">Home</a></li>
                        <li><a href="#services" class="nav-link" data-page="services">Services</a></li>
                        <li><a href="#dashboard" class="nav-link" data-page="dashboard">Dashboard</a></li>
                        <li><a href="#contact" class="nav-link" data-page="contact">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>Services</h3>
                    <ul>
                        <li><a href="#">Government Scheme Access</a></li>
                        <li><a href="#">Financial Documentation</a></li>
                        <li><a href="#">Machinery Rentals</a></li>
                        <li><a href="#">Farm Supplies</a></li>
                        <li><a href="#">Agriculture Consultancy</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>Contact Us</h3>
                    <ul>

                        <li><i class="fas fa-phone"></i>7975256005</li>
                        <li><i class="fas fa-phone"></i> 9886888129</li>
                        <li><i class="fas fa-envelope"></i>agrisense.technologies2025@gmail.com</li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 AgriSense Technologies Private Limited. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Login to Your Account</h2>
                <button class="close-btn" id="closeLoginModal">&times;</button>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Login</button>
                <div class="form-footer">
                    <p>Don't have an account? <a id="showSignupFromLogin">Sign up</a></p>
                </div>
            </form>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="modal" id="signupModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create an Account</h2>
                <button class="close-btn" id="closeSignupModal">&times;</button>
            </div>
            <form id="signupForm">
                <div class="form-group">
                    <label for="signupName">Full Name</label>
                    <input type="text" id="signupName" required>
                </div>
                <div class="form-group">
                    <label for="signupEmail">Email</label>
                    <input type="email" id="signupEmail" required>
                </div>
                <div class="form-group">
                    <label for="signupPassword">Password</label>
                    <input type="password" id="signupPassword" required>
                </div>
                <div class="form-group">
                    <label for="confirmPassword">Confirm Password</label>
                    <input type="password" id="confirmPassword" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Sign Up</button>
                <div class="form-footer">
                    <p>Already have an account? <a id="showLoginFromSignup">Login</a></p>
                </div>
            </form>
        </div>
    </div>

    <!-- Service Booking Modal -->
    <div class="booking-modal" id="bookingModal">
        <div class="booking-content">
            <div class="booking-header">
                <h2 id="bookingTitle">Book Service</h2>
                <button class="close-btn" id="closeBookingModal">&times;</button>
            </div>
            <form id="bookingForm">
                <div class="form-group">
                    <label for="bookingService">Service</label>
                    <input type="text" id="bookingService" readonly>
                </div>
                <div class="form-group">
                    <label for="bookingDate">Preferred Date</label>
                    <input type="date" id="bookingDate" required>
                </div>
                <div class="form-group">
                    <label for="bookingDetails">Additional Details</label>
                    <textarea id="bookingDetails" placeholder="Please provide any additional information..."></textarea>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Book Now</button>
            </form>
        </div>
    </div>

    <!-- AgriBot Chat Interface -->
    <button id="chatbotToggle" class="chatbot-btn">üí¨ AgriBot</button>

    <div id="chatbotBox" class="chatbot-box" aria-hidden="true">
        <div class="chatbot-header">
            <h3>ü§ñ AgriBot Assistant</h3>
            <select id="langSelect" aria-label="Select language">
                <option value="en">English</option>
                <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
                <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤° (Kannada)</option>
            </select>
            <button id="closeChat" aria-label="Close chat">‚úñ</button>
        </div>

        <div id="chatbox" class="chatbox-content" role="log" aria-live="polite">
            <!-- Initial Bot Message -->
            <div class="bot-msg">
                ü§ñ Hello! I am AgriBot, your multilingual agricultural expert. Ask me anything about farming, crops, or
                soil health. Please select your preferred language above!
            </div>
        </div>

        <div class="chat-controls">
            <input type="text" id="userInput" placeholder="Type your message..." aria-label="Message input" />
            <button id="sendBtn">Send</button>
        </div>
    </div>

    <script>
        // --- Gemini API Configuration ---
        const API_KEY = "AIzaSyCouYYH-XJJ8z9ezHtmcdslM4l2VgW3wxE";
        const API_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=" + API_KEY;
        const MAX_RETRIES = 5;

        // --- Core Functions ---

        /**
         * Exponential backoff retry logic for fetch calls.
         */
        async function fetchWithRetry(url, options) {
            for (let i = 0; i < MAX_RETRIES; i++) {
                try {
                    const response = await fetch(url, options);
                    if (response.status === 429 && i < MAX_RETRIES - 1) {
                        const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                        await new Promise(resolve => setTimeout(resolve, delay));
                        continue;
                    }
                    if (!response.ok) {
                        const errorBody = await response.text();
                        console.error("API Non-OK Response:", errorBody);
                        throw new Error(`HTTP error! Status: ${response.status}`);
                    }
                    return response;
                } catch (error) {
                    if (i === MAX_RETRIES - 1) {
                        throw new Error("API request failed after multiple retries.");
                    }
                    const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
        }

        /**
         * Generates the system instruction based on the selected language code.
         */
        const getSystemPrompt = (langCode) => {
            let languageName = 'English';
            if (langCode === 'hi') languageName = 'Hindi (‡§π‡§ø‡§®‡•ç‡§¶‡•Ä)';
            if (langCode === 'kn') languageName = 'Kannada (‡≤ï‡≤®‡≥ç‡≤®‡≤°)';

            return `You are AgriBot, an expert agricultural assistant and advisor. Your role is to provide accurate, practical, and up-to-date advice on farming, crops, soil health, pest control, and sustainable agriculture based on verified information. 
            Always keep your response concise and farmer-friendly. 
            Respond strictly in the selected language: ${languageName}. 
            If the user's query is in a different language, translate it and respond to the question in ${languageName}.`;
        };

        // --- Dashboard and Chat Initialization ---
        document.addEventListener("DOMContentLoaded", () => {
            // Chatbot Logic Initialization
            const chatBtn = document.getElementById("chatbotToggle");
            const chatBox = document.getElementById("chatbotBox");
            const closeBtn = document.getElementById("closeChat");
            const chatbox = document.getElementById("chatbox");
            const sendBtn = document.getElementById("sendBtn");
            const userInput = document.getElementById("userInput");
            const langSelect = document.getElementById("langSelect");

            // Check if elements exist
            if (!chatBtn || !chatBox) {
                console.error("‚ùå AgriBot elements missing ‚Äî check your HTML IDs.");
                return;
            }

            // Event listeners for UI control
            chatBtn.addEventListener("click", toggleChatbot);
            closeBtn.addEventListener("click", toggleChatbot);
            sendBtn.addEventListener("click", sendMessage);
            userInput.addEventListener("keypress", (e) => {
                if (e.key === "Enter") sendMessage();
            });

            // Set default language on selection change (for the welcome message)
            langSelect.addEventListener("change", updateWelcomeMessage);
            updateWelcomeMessage(); // Initial call

            /** Toggles the chatbot visibility with animation */
            function toggleChatbot() {
                const isVisible = chatBox.classList.toggle("visible");
                if (isVisible) {
                    chatBox.style.display = "flex";
                    setTimeout(() => {
                        chatBox.style.opacity = "1";
                        chatBox.style.transform = "translateY(0)";
                        userInput.focus();
                    }, 10);
                } else {
                    chatBox.style.opacity = "0";
                    chatBox.style.transform = "translateY(50px)";
                    setTimeout(() => {
                        chatBox.style.display = "none";
                    }, 300);
                }
            }

            /** Updates the initial welcome message based on selected language (UI only) */
            function updateWelcomeMessage() {
                const lang = langSelect.value;
                let welcomeText = "Hello! I am AgriBot, your multilingual agricultural expert. Ask me anything about farming, crops, or soil health. Please select your preferred language above!";

                if (lang === 'hi') {
                    welcomeText = "‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç ‡§è‡§ó‡•ç‡§∞‡•Ä‡§¨‡•ã‡§ü ‡§π‡•Ç‡§Å, ‡§Ü‡§™‡§ï‡§æ ‡§¨‡§π‡•Å‡§≠‡§æ‡§∑‡•Ä ‡§ï‡•É‡§∑‡§ø ‡§µ‡§ø‡§∂‡•á‡§∑‡§ú‡•ç‡§û‡•§ ‡§ñ‡•á‡§§‡•Ä, ‡§´‡§∏‡§≤ ‡§Ø‡§æ ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ï‡•á ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§õ ‡§≠‡•Ä ‡§™‡•Ç‡§õ‡•á‡§Ç‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§ä‡§™‡§∞ ‡§Ö‡§™‡§®‡•Ä ‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§≠‡§æ‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç!";
                } else if (lang === 'kn') {
                    welcomeText = "‡≤®‡≤Æ‡≤∏‡≥ç‡≤ï‡≤æ‡≤∞! ‡≤®‡≤æ‡≤®‡≥Å ‡≤Ö‡≤ó‡≥ç‡≤∞‡≤ø‡≤¨‡≥ã‡≤ü‡≥ç, ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤¨‡≤π‡≥Å‡≤≠‡≤æ‡≤∑‡≤æ ‡≤ï‡≥É‡≤∑‡≤ø ‡≤§‡≤ú‡≥ç‡≤û. ‡≤ï‡≥É‡≤∑‡≤ø, ‡≤¨‡≥Ü‡≤≥‡≥Ü‡≤ó‡≤≥‡≥Å ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤Æ‡≤£‡≥ç‡≤£‡≤ø‡≤® ‡≤Ü‡≤∞‡≥ã‡≤ó‡≥ç‡≤Ø‡≤¶ ‡≤¨‡≤ó‡≥ç‡≤ó‡≥Ü ‡≤®‡≥Ä‡≤µ‡≥Å ‡≤è‡≤®‡≥Å ‡≤¨‡≥á‡≤ï‡≤æ‡≤¶‡≤∞‡≥Ç ‡≤ï‡≥á‡≤≥‡≤¨‡≤π‡≥Å‡≤¶‡≥Å. ‡≤¶‡≤Ø‡≤µ‡≤ø‡≤ü‡≥ç‡≤ü‡≥Å ‡≤Æ‡≥á‡≤≤‡≥Ü ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤Ü‡≤¶‡≥ç‡≤Ø‡≤§‡≥Ü‡≤Ø ‡≤≠‡≤æ‡≤∑‡≥Ü‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü‡≤Æ‡≤æ‡≤°‡≤ø!";
                }

                const initialMessage = chatbox.querySelector('.bot-msg');
                if (initialMessage && initialMessage.innerHTML.includes('AgriBot, your multilingual agricultural expert')) {
                    initialMessage.innerHTML = `ü§ñ ${welcomeText}`;
                }
            }

            /** Appends a message to the chatbox */
            function appendMessage(role, text, sources = []) {
                const div = document.createElement("div");
                div.className = role === "user" ? "user-msg" : "bot-msg";
                const icon = role === "user" ? "üßë‚Äçüåæ " : "ü§ñ ";

                let messageContent = icon + text.replace(/\n/g, '<br>');

                if (sources.length > 0) {
                    messageContent += '<div class="mt-2 text-xs font-semibold text-gray-600">Sources:</div>';
                    sources.forEach((source, index) => {
                        messageContent += `
                            <a href="${source.uri}" target="_blank" rel="noopener noreferrer" class="source-link">
                                [${index + 1}] ${source.title || source.uri}
                            </a>`;
                    });
                }

                div.innerHTML = messageContent;
                chatbox.appendChild(div);
                chatbox.scrollTop = chatbox.scrollHeight;
            }

            /** Handles sending message and calling the Gemini API */
            async function sendMessage() {
                const msg = userInput.value.trim();
                if (!msg) return;

                const selectedLang = langSelect.value || "en";
                const systemPrompt = getSystemPrompt(selectedLang);

                // 1. Display user message and clear input
                appendMessage("user", msg);
                userInput.value = "";

                // Disable input and button while waiting for response
                userInput.disabled = true;
                sendBtn.disabled = true;
                sendBtn.textContent = "Loading...";

                // Create a temporary loading message for the bot
                const loadingIndicator = document.createElement("div");
                loadingIndicator.className = "bot-msg";
                loadingIndicator.innerHTML = 'ü§ñ <span class="loading-dots">.</span>';
                chatbox.appendChild(loadingIndicator);
                chatbox.scrollTop = chatbox.scrollHeight;

                try {
                    const payload = {
                        contents: [{ parts: [{ text: msg }] }],
                        tools: [{ "google_search": {} }], // Enable Google Search Grounding
                        systemInstruction: { parts: [{ text: systemPrompt }] },
                    };

                    const response = await fetchWithRetry(API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    const result = await response.json();

                    const candidate = result.candidates?.[0];
                    let responseText = "Sorry, I couldn't get a helpful response. Please try again.";
                    let sources = [];

                    if (candidate && candidate.content?.parts?.[0]?.text) {
                        responseText = candidate.content.parts[0].text;

                        const groundingMetadata = candidate.groundingMetadata;
                        if (groundingMetadata && groundingMetadata.groundingAttributions) {
                            sources = groundingMetadata.groundingAttributions
                                .map(attribution => ({
                                    uri: attribution.web?.uri,
                                    title: attribution.web?.title,
                                }))
                                .filter(source => source.uri); // Only keep valid sources
                        }
                    }

                    // Remove the loading indicator
                    loadingIndicator.remove();

                    // Display the final bot response
                    appendMessage("bot", responseText, sources);

                } catch (e) {
                    loadingIndicator.remove();
                    console.error("Gemini API Error:", e);
                    // Use multilingual error message for clarity
                    let errorMsg = "‚ö†Ô∏è Network error: Could not connect to the AI service. Please try again.";
                    if (selectedLang === 'hi') {
                        errorMsg = "‚ö†Ô∏è ‡§®‡•á‡§ü‡§µ‡§∞‡•ç‡§ï ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: AI ‡§∏‡•á‡§µ‡§æ ‡§∏‡•á ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã ‡§∏‡§ï‡§æ‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§";
                    } else if (selectedLang === 'kn') {
                        errorMsg = "‚ö†Ô∏è ‡≤®‡≥Ü‡≤ü‡≥ç‚Äå‡≤µ‡≤∞‡≥ç‡≤ï‡≥ç ‡≤¶‡≥ã‡≤∑: AI ‡≤∏‡≥á‡≤µ‡≥Ü‡≤Ø‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü ‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï‡≤ø‡≤∏‡≤≤‡≥Å ‡≤∏‡≤æ‡≤ß‡≥ç‡≤Ø‡≤µ‡≤æ‡≤ó‡≤≤‡≤ø‡≤≤‡≥ç‡≤≤. ‡≤¶‡≤Ø‡≤µ‡≤ø‡≤ü‡≥ç‡≤ü‡≥Å ‡≤Æ‡≤§‡≥ç‡≤§‡≥Ü ‡≤™‡≥ç‡≤∞‡≤Ø‡≤§‡≥ç‡≤®‡≤ø‡≤∏‡≤ø.";
                    }
                    appendMessage("bot", errorMsg);
                } finally {
                    // Re-enable input and button
                    userInput.disabled = false;
                    sendBtn.disabled = false;
                    sendBtn.textContent = "Send";
                    userInput.focus();
                }
            }

            // Original website functionality
            const loginBtn = document.getElementById('loginBtn');
            const signupBtn = document.getElementById('signupBtn');
            const logoutBtn = document.getElementById('logoutBtn');
            const loginModal = document.getElementById('loginModal');
            const signupModal = document.getElementById('signupModal');
            const closeLoginModal = document.getElementById('closeLoginModal');
            const closeSignupModal = document.getElementById('closeSignupModal');
            const showSignupFromLogin = document.getElementById('showSignupFromLogin');
            const showLoginFromSignup = document.getElementById('showLoginFromSignup');
            const loginForm = document.getElementById('loginForm');
            const signupForm = document.getElementById('signupForm');
            const contactForm = document.getElementById('contactForm');
            const contactSuccess = document.getElementById('contactSuccess');
            const authButtons = document.getElementById('authButtons');
            const userWelcome = document.getElementById('userWelcome');
            const welcomeText = document.getElementById('welcomeText');
            const userAvatar = document.getElementById('userAvatar');
            const dashboardWelcomeText = document.getElementById('dashboardWelcomeText');
            const dashboardUserAvatar = document.getElementById('dashboardUserAvatar');
            const dashboardTitle = document.getElementById('dashboardTitle');
            const dashboardSubtitle = document.getElementById('dashboardSubtitle');
            const exploreServicesBtn = document.getElementById('exploreServicesBtn');
            const getStartedBtn = document.getElementById('getStartedBtn');
            const navLinks = document.querySelectorAll('.nav-link');
            const pageSections = document.querySelectorAll('.page-section');
            const mobileNavToggle = document.getElementById('mobileNavToggle');
            const mobileNav = document.getElementById('mobileNav');
            const dashboardCards = document.querySelectorAll('.dashboard-card');
            const bookingModal = document.getElementById('bookingModal');
            const closeBookingModal = document.getElementById('closeBookingModal');
            const bookingForm = document.getElementById('bookingForm');
            const bookingService = document.getElementById('bookingService');
            const bookingTitle = document.getElementById('bookingTitle');
            const activitiesList = document.getElementById('activitiesList');

            // Mobile navigation toggle
            mobileNavToggle.addEventListener('click', () => {
                mobileNav.classList.toggle('active');
            });

            // Close mobile nav when clicking on a link
            document.querySelectorAll('.mobile-nav a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileNav.classList.remove('active');
                });
            });

            // Dashboard card click handlers
            dashboardCards.forEach(card => {
                card.addEventListener('click', () => {
                    const service = card.getAttribute('data-service');
                    openBookingModal(service, card.querySelector('h3').textContent);
                });
            });

            // Open booking modal
            function openBookingModal(service, title) {
                bookingService.value = title;
                bookingTitle.textContent = `Book ${title}`;
                bookingModal.style.display = 'flex';
            }

            // Close booking modal
            closeBookingModal.addEventListener('click', () => {
                bookingModal.style.display = 'none';
            });

            // Handle booking form submission
            bookingForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const service = bookingService.value;
                const date = document.getElementById('bookingDate').value;
                const details = document.getElementById('bookingDetails').value;

                // Add to recent activities
                addActivity(service, date, details);

                // Close modal
                bookingModal.style.display = 'none';

                // Show success message
                alert(`Your ${service} booking has been submitted successfully!`);

                // Reset form
                bookingForm.reset();
            });

            // Add activity to recent activities
            function addActivity(service, date, details) {
                const activityItem = document.createElement('div');
                activityItem.className = 'activity-item';

                // Set icon based on service
                let iconClass = 'fas fa-file-contract';
                if (service.includes('Financial')) iconClass = 'fas fa-hand-holding-usd';
                if (service.includes('Machinery')) iconClass = 'fas fa-tractor';
                if (service.includes('Supplies')) iconClass = 'fas fa-truck';

                // Format date
                const formattedDate = new Date(date).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });

                activityItem.innerHTML = `
                    <div class="activity-icon">
                        <i class="${iconClass}"></i>
                    </div>
                    <div>
                        <h4>${service}</h4>
                        <p>Booked for ${formattedDate}</p>
                    </div>
                `;

                // Add to the top of the activities list
                activitiesList.insertBefore(activityItem, activitiesList.firstChild);

                // Limit to 5 activities
                if (activitiesList.children.length > 5) {
                    activitiesList.removeChild(activitiesList.lastChild);
                }
            }

            // Check if user is logged in
            function checkAuthStatus() {
                const currentUser = JSON.parse(localStorage.getItem('currentUser'));
                if (currentUser) {
                    // User is logged in
                    authButtons.style.display = 'none';
                    userWelcome.style.display = 'flex';
                    welcomeText.textContent = `Hi, ${currentUser.name.split(' ')[0]}!`;
                    userAvatar.textContent = currentUser.name.charAt(0).toUpperCase();
                    dashboardWelcomeText.textContent = `Hi, ${currentUser.name.split(' ')[0]}!`;
                    dashboardUserAvatar.textContent = currentUser.name.charAt(0).toUpperCase();
                    dashboardTitle.textContent = `${currentUser.name.split(' ')[0]}'s Dashboard`;
                    dashboardSubtitle.textContent = `Welcome back to your AgriSense dashboard`;
                } else {
                    // User is not logged in
                    authButtons.style.display = 'flex';
                    userWelcome.style.display = 'none';
                }
            }

            // Show login modal
            loginBtn.addEventListener('click', () => {
                loginModal.style.display = 'flex';
            });

            // Show signup modal
            signupBtn.addEventListener('click', () => {
                signupModal.style.display = 'flex';
            });

            // Close modals
            closeLoginModal.addEventListener('click', () => {
                loginModal.style.display = 'none';
            });

            closeSignupModal.addEventListener('click', () => {
                signupModal.style.display = 'none';
            });

            // Switch between login and signup modals
            showSignupFromLogin.addEventListener('click', () => {
                loginModal.style.display = 'none';
                signupModal.style.display = 'flex';
            });

            showLoginFromSignup.addEventListener('click', () => {
                signupModal.style.display = 'none';
                loginModal.style.display = 'flex';
            });

            // Close modals when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === loginModal) {
                    loginModal.style.display = 'none';
                }
                if (e.target === signupModal) {
                    signupModal.style.display = 'none';
                }
                if (e.target === bookingModal) {
                    bookingModal.style.display = 'none';
                }
            });

            // Handle login form submission
            loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;

                // Get users from localStorage
                const users = JSON.parse(localStorage.getItem('users')) || [];

                // Find user with matching credentials
                const user = users.find(u => u.email === email && u.password === password);

                if (user) {
                    // Store current user in localStorage
                    localStorage.setItem('currentUser', JSON.stringify(user));

                    // Update UI
                    checkAuthStatus();

                    // Close modal
                    loginModal.style.display = 'none';

                    // Show success message
                    alert('Login successful!');

                    // Reset form
                    loginForm.reset();
                } else {
                    alert('Invalid email or password. Please try again.');
                }
            });

            // Handle signup form submission
            signupForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const name = document.getElementById('signupName').value;
                const email = document.getElementById('signupEmail').value;
                const password = document.getElementById('signupPassword').value;
                const confirmPassword = document.getElementById('confirmPassword').value;

                // Validate passwords match
                if (password !== confirmPassword) {
                    alert('Passwords do not match. Please try again.');
                    return;
                }

                // Get users from localStorage
                const users = JSON.parse(localStorage.getItem('users')) || [];

                // Check if user already exists
                if (users.find(u => u.email === email)) {
                    alert('An account with this email already exists. Please login instead.');
                    return;
                }

                // Create new user
                const newUser = {
                    name,
                    email,
                    password
                };

                // Add user to users array
                users.push(newUser);

                // Save users to localStorage
                localStorage.setItem('users', JSON.stringify(users));

                // Store current user in localStorage
                localStorage.setItem('currentUser', JSON.stringify(newUser));

                // Update UI
                checkAuthStatus();

                // Close modal
                signupModal.style.display = 'none';

                // Show success message
                alert('Account created successfully!');

                // Reset form
                signupForm.reset();
            });

            // Handle contact form submission
            contactForm.addEventListener('submit', (e) => {
                // Form will submit to Formspree automatically
                // Show success message
                contactSuccess.style.display = 'block';

                // Hide success message after 5 seconds
                setTimeout(() => {
                    contactSuccess.style.display = 'none';
                }, 5000);
            });

            // Handle logout
            logoutBtn.addEventListener('click', () => {
                // Remove current user from localStorage
                localStorage.removeItem('currentUser');

                // Update UI
                checkAuthStatus();

                // Show home section
                showPage('home');

                // Show success message
                alert('You have been logged out successfully.');
            });

            // Navigation
            function showPage(pageId) {
                // Hide all pages
                pageSections.forEach(section => {
                    section.style.display = 'none';
                });

                // Show selected page
                document.getElementById(pageId).style.display = 'block';

                // Special handling for dashboard
                if (pageId === 'dashboard') {
                    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
                    if (!currentUser) {
                        alert('Please login to access the dashboard.');
                        showPage('home');
                        loginModal.style.display = 'flex';
                        return;
                    }
                }
            }

            // Add event listeners to navigation links
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const page = link.getAttribute('data-page');
                    showPage(page);
                });
            });

            // Get Started buttons
            exploreServicesBtn.addEventListener('click', () => {
                showPage('services');
            });

            getStartedBtn.addEventListener('click', () => {
                const currentUser = JSON.parse(localStorage.getItem('currentUser'));
                if (currentUser) {
                    showPage('dashboard');
                } else {
                    signupModal.style.display = 'flex';
                }
            });

            // Initialize the page
            function init() {
                // Check authentication status
                checkAuthStatus();

                // Show home page by default
                showPage('home');

                // Add animation to service cards
                const serviceCards = document.querySelectorAll('.service-card');

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.style.opacity = 1;
                            entry.target.style.transform = 'translateY(0)';
                        }
                    });
                }, { threshold: 0.1 });

                serviceCards.forEach(card => {
                    card.style.opacity = 0;
                    card.style.transform = 'translateY(20px)';
                    card.style.transition = 'opacity 0.5s, transform 0.5s';
                    observer.observe(card);
                });
            }

            // Run initialization
            init();
        });
    </script>
</body>

</html>